import{d as f,r as u,o as y,c as e,a as s,f as w,b as l,i as v,p as k,e as n,t as d,s as h,q as C,y as j,z as S,k as o}from"./index-FuMGBNr_.js";import{R as A}from"./refresh-cw-B5UK-0jM.js";import{T as p}from"./triangle-alert-1Rn6Vmyi.js";import{F as b}from"./file-key-CKcbrZKU.js";import{C as B}from"./circle-check-big-C5mCHIra.js";import{C as N}from"./clock-CWxjY3HO.js";import{S as x}from"./server-CbUF9Ud5.js";import"./createLucideIcon-DPGb8pea.js";const R={class:"space-y-6"},V={class:"flex justify-end"},T=["disabled"],z={key:0,class:"alert alert-error"},D={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},F={class:"card bg-base-100 shadow-sm"},q={class:"card-body"},E={class:"flex items-center justify-between"},K={class:"text-3xl font-bold mt-1"},M={key:0,class:"loading loading-dots loading-sm"},P={key:1},G={class:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center"},H={class:"card bg-base-100 shadow-sm"},I={class:"card-body"},J={class:"flex items-center justify-between"},L={class:"text-3xl font-bold mt-1 text-success"},O={key:0,class:"loading loading-dots loading-sm"},Q={key:1},U={class:"w-12 h-12 rounded-xl bg-success/10 flex items-center justify-center"},W={class:"card bg-base-100 shadow-sm"},X={class:"card-body"},Y={class:"flex items-center justify-between"},Z={class:"text-3xl font-bold mt-1 text-warning"},$={key:0,class:"loading loading-dots loading-sm"},ss={key:1},ts={class:"w-12 h-12 rounded-xl bg-warning/10 flex items-center justify-center"},es={class:"card bg-base-100 shadow-sm"},os={class:"card-body"},as={class:"flex items-center justify-between"},ls={class:"text-3xl font-bold mt-1 text-error"},ns={key:0,class:"loading loading-dots loading-sm"},ds={key:1},is={class:"w-12 h-12 rounded-xl bg-error/10 flex items-center justify-center"},cs={class:"card bg-base-100 shadow-sm"},rs={class:"card-body"},_s={class:"card-title text-lg mb-4"},us={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},vs={class:"stat bg-base-200 rounded-xl"},gs={class:"stat-value"},ms={key:0,class:"loading loading-dots loading-sm"},hs={key:1},ps={class:"stat bg-base-200 rounded-xl"},bs={class:"stat-value text-success"},xs={key:0,class:"loading loading-dots loading-sm"},fs={key:1},ys={class:"stat bg-base-200 rounded-xl"},ws={class:"stat-value text-error"},ks={key:0,class:"loading loading-dots loading-sm"},Cs={key:1},js={class:"card bg-base-100 shadow-sm"},Ss={class:"card-body"},As={class:"flex flex-wrap gap-3"},Es=f({__name:"Dashboard",setup(Bs){const i=u(null),c=u(null),a=u(!0),r=u("");async function g(){a.value=!0,r.value="";try{const[_,t]=await Promise.all([j.stats(),S.stats()]);i.value=_.data,c.value=t.data}catch(_){const t=_;r.value=t.message||"加载失败"}finally{a.value=!1}}return y(g),(_,t)=>{const m=C("router-link");return o(),e("div",R,[s("div",V,[s("button",{class:"btn btn-ghost btn-sm gap-2",onClick:g,disabled:a.value},[l(n(A),{class:k(["w-4 h-4",a.value&&"animate-spin"])},null,8,["class"]),t[0]||(t[0]=v(" 刷新 ",-1))],8,T)]),r.value?(o(),e("div",z,[l(n(p),{class:"w-5 h-5"}),s("span",null,d(r.value),1)])):w("",!0),s("div",D,[s("div",F,[s("div",q,[s("div",E,[s("div",null,[t[1]||(t[1]=s("p",{class:"text-base-content/60 text-sm"},"证书总数",-1)),s("p",K,[a.value?(o(),e("span",M)):(o(),e("span",P,d(i.value?.total??0),1))])]),s("div",G,[l(n(b),{class:"w-6 h-6 text-primary"})])])])]),s("div",H,[s("div",I,[s("div",J,[s("div",null,[t[2]||(t[2]=s("p",{class:"text-base-content/60 text-sm"},"有效证书",-1)),s("p",L,[a.value?(o(),e("span",O)):(o(),e("span",Q,d(i.value?.valid??0),1))])]),s("div",U,[l(n(B),{class:"w-6 h-6 text-success"})])])])]),s("div",W,[s("div",X,[s("div",Y,[s("div",null,[t[3]||(t[3]=s("p",{class:"text-base-content/60 text-sm"},"即将过期",-1)),s("p",Z,[a.value?(o(),e("span",$)):(o(),e("span",ss,d(i.value?.expiring_soon??0),1))])]),s("div",ts,[l(n(N),{class:"w-6 h-6 text-warning"})])])])]),s("div",es,[s("div",os,[s("div",as,[s("div",null,[t[4]||(t[4]=s("p",{class:"text-base-content/60 text-sm"},"已过期",-1)),s("p",ls,[a.value?(o(),e("span",ns)):(o(),e("span",ds,d(i.value?.expired??0),1))])]),s("div",is,[l(n(p),{class:"w-6 h-6 text-error"})])])])])]),s("div",cs,[s("div",rs,[s("h2",_s,[l(n(x),{class:"w-5 h-5"}),t[5]||(t[5]=v(" Agent 状态 ",-1))]),s("div",us,[s("div",vs,[t[6]||(t[6]=s("div",{class:"stat-title"},"总数",-1)),s("div",gs,[a.value?(o(),e("span",ms)):(o(),e("span",hs,d(c.value?.total??0),1))])]),s("div",ps,[t[7]||(t[7]=s("div",{class:"stat-title"},"在线",-1)),s("div",bs,[a.value?(o(),e("span",xs)):(o(),e("span",fs,d(c.value?.online??0),1))])]),s("div",ys,[t[8]||(t[8]=s("div",{class:"stat-title"},"离线",-1)),s("div",ws,[a.value?(o(),e("span",ks)):(o(),e("span",Cs,d(c.value?.offline??0),1))])])])])]),s("div",js,[s("div",Ss,[t[11]||(t[11]=s("h2",{class:"card-title text-lg mb-4"},"快速操作",-1)),s("div",As,[l(m,{to:"/certs",class:"btn btn-primary"},{default:h(()=>[l(n(b),{class:"w-4 h-4"}),t[9]||(t[9]=v(" 申请证书 ",-1))]),_:1}),l(m,{to:"/agents",class:"btn btn-outline"},{default:h(()=>[l(n(x),{class:"w-4 h-4"}),t[10]||(t[10]=v(" 添加 Agent ",-1))]),_:1})])])])])}}});export{Es as default};
